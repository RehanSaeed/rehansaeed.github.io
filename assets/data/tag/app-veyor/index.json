{"hash":"827cc05a23416cc9ff084c39b6ea864df973faef","data":{"tag":{"title":"AppVeyor","path":"/tag/app-veyor/","belongsTo":{"edges":[{"node":{"title":"Cross-Platform DevOps for .NET Core","path":"/cross-platform-devops-net-core/","date":"28 January 2017","timeToRead":9,"description":"Learn how to use Cake, AppVeyor and Travis CI continuous integration build systems to perform cross-platform DevOps for .NET Core based projects.","content":"<p>If you're a library author or writing a cross-platform application then .NET Core is great but it throws up the question, how do you test that your code works on all operating systems? Well the answer is simple, you build and test your code on each platform.</p>\n<p>This post builds on <a href=\"http://andrewlock.net\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Andrew Lock's</a> work where he shows in two blog posts how to build, test and deploy your .NET Core NuGet packages using <a href=\"http://andrewlock.net/publishing-your-first-nuget-package-with-appveyor-and-myget/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">AppVeyor</a> (Windows) and <a href=\"http://andrewlock.net/adding-travis-ci-to-a-net-core-app/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Travis CI</a> (Mac and Linux) continuous integration build systems.</p>\n<p>In Andrew's blog posts, he writes PowerShell (Windows) or Bash (Mac and Linux) scripts to build, test and deploy his code. There were two problems here.</p>\n<ol>\n<li>Code is duplicated because you have to write your shell scripts twice.</li>\n<li>I've already grudgingly learned how to write PowerShell and done a little Bash but found both languages pretty ugly and difficult to use for more complex scenarios.</li>\n</ol>\n<p>I only want to write my shell script once, I don't want to have to learn Bash in-depth and I don't want to write PowerShell if I can help it. Around the same time I was reading Andrew's blog posts, I read about <a href=\"http://cakebuild.net/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Cake</a> build.</p>\n<h1 id=\"cake\"><a href=\"#cake\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"aria-hidden\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cake</h1>\n<p>Cake lets you write your build, test and deployment script in C# and it provides lots of helper methods to get stuff done making your script very terse. You can get syntax highlighting and intellisense for your Cake scripts by installing the <a href=\"https://marketplace.visualstudio.com/items?itemName=vs-publisher-1392591.CakeforVisualStudio\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Visual Studio</a> or <a href=\"https://marketplace.visualstudio.com/items?itemName=cake-build.cake-vscode\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Visual Studio Code</a> extensions.</p>\n<p>Building and testing your .NET Core code using Cake is dead dimple. Grab the <code class=\"language-text\">build.cake</code>, <code class=\"language-text\">build.ps1</code> and <code class=\"language-text\">build.sh</code> files from the Cake <a href=\"http://cakebuild.net/docs/tutorials/getting-started\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Getting Started</a> guide and drop them at the root of your project. Here is an example of my project and the files we'll be dealing with in this post:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 325 437' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-f5aafa2e0343572c5ddb79fa0dcf80c4'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-f5aafa2e0343572c5ddb79fa0dcf80c4)' width='325' height='437' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAABWCAIAAADwhAcPAAAACXBIWXMAAAsSAAALEgHS3X78AAARLklEQVR42tVb55PjRnafv9Jf7E%2b2y2XfN9lVKttXrpN83rN0K2lXG2Z3dnaHQ05kznGYc845ghEEwBxBRDdIzixXGjlUWUuq6w2m0WyC/dDv9wLewxH7s8asG/sbaUfbRRMjGu%2bw9HKXh3WjQWPY9T%2bKOkDGAAPcmui%2bFc9%2bwUyCoD%2bZjCbTyYaNDTdg6Ye8A2sGBqZ5/G%2bongn0S9WiVHalFl/bPf47o16jM1lcTo1SJhaJzWYHTq%2bZOjgGMM0s8/sNA61Oy3CnzYf97kDw8kJwI1JcScRXFxcul0Oj1o6X5KExsG7U/JFVrUVoORtFovEVxRwmuI9%2b6YMNgDeH9S1nDkt0fiJC1MCzqnzDzNOcONHkbDajfyOadMsAM7AsEn9LDRwcBmpZneGu2WrGool%2br1fK51LJTLFYSibiHbT/UTsdFohRxTT2dzSqBH18PtYrFRK52qBUKSUK4eWlwexw2Rxv3x5nKy1u8gEywCyq1LTIEAPQX8wmdajRw1AU/MEwgmD4ctZud7pwZ4GvfjMgftBC7GGC96cgnuZJRM2u2pyEkASO4xTNPKKUDtgSW/H07%2biRF/SHvY5Gr%2b0PR%2bPxpI91C5XafLFkDnwHOEsc%2bastiAlcq5HwTt/y%2bFcS4RXv4koiVXMOBEMfMANDP95W0rMcJ04UCdXKxUKuUq3mspl8IZ9MZ%2bhDRcLRf/8xc8j43WVgOBxiGIIg3Y2R4mKAtR%2bx8aZ3goSH4yExAJZb5lolGo2OhiMwQuDLFb4aDQYohs3nc3y5pLhGLpY4QZAUSa0I8rAYyOfz8UQimUwNhkMwkggFNTa7TqNQqkRut8fkdGk1cp1C6XB7rUat0WS%2buREPZstDcCuO1qil8oVCuVJJptLD0Wg1n2rlivdCUTjki4bcDpvt9PLaZrcGrWaTzRFw2cKRsFiqWJL0IeB6i4HxZNofDPuDPklystFpQsVyHXRWBIUvp/FEilgbMWAQiPW68RVxICg4mqzYNMZWxmxtzOaHbLbPZjC2OGYrEyaF0BmMASPQks1idBoFfSaDUkmEAp1cn8329k9HQ5z1tdnB2tR2R8tghwnBTLjLxHpsvMemhmwMo30NHJxGEDreZ5JDNjViIzDha1LhLhuC90wcA5EuCw2Ii1DnxNMsDthkj%2bFr7TxDTOlO840RfaxybYnIXDlrEdOGC3yd51ztudA7NcleEnAFM9Euu0c6GizZKMIWMPwPutLXhgqQJT80ey3UfyfQvzy9/PKHs/88Vb0Rq755fXltjv3xWPj8QvZBqP%2bGJ1UmeokeG4YZwP8eiduBQIdtTNghzpT6ZBJj/Q3cXhh560tXaeiqTn2Nqb%2bxdFUm2lBN6i1EukywufJA80Cb2u/Stwz0FqyryTqbrKXO2Jusu8V626wPZn0dZnP0tGkw4ofBOOntUKDvARM6rLfFuAE1OfIAarF7oe0OIHNOo7fGJEBwBGFjKBvH2MQax4CiCB0Dp30gLfR6kAGDMZSJIkwSYGbAzd%2bnCAU7bH9BV3tzax4DSjPQxM0Z1JxB7lLwXbpjTCGe%2bsKShnXxTqAxNSQ6pnTXkum5KiN3ZaD0l3ThusKXcUBkHAWQ%2bOwMABDHEDbRWfylIPkPolx9zt4l6l98/eob3u3Lc/GTU8n3Z/JvTm7/9c8nT3nKb9/dPrsy/XBy%2bV4blVij//5O8t0J/4VA%2bSee1A7R%2b2FgswPdGdMc4qH6BNgyew4514Vfi7Vii/%2bVyKAKNXSRmtKXF9liZ2qfNlSVOtPu6kSgcV9Y084sbMvAqjAUaDOxfalRDrVtNoKyyT7XCXTZ%2bAAAgwmjTKBDhzE2gjHRHutrEb4OFQGqE2PDKOtp4MEumMOGEDCBA5J/H7RlINih7bmuMdP1NMlglw3CjL/NEegDTkJdMJUOwEwQZrlBmPG1mcC677sn/74Y2FjiJLry1tuvzQ5LvOytza05BOxGDGEsyYarNrVkMQ80i3bJMEwHWwt7HktgnEbarw3eihBw5mwN4ok7%2b2/OxInZbvaF1eHqf7x8d3JrvzAEXgjEr4SWP7yTSBxJgT7AU7l//%2bzDH388e/KK//TyLn4IlniMs64W%2bSHaeO5Oy6w2YyBlyyGvruRnMvuPfLVA7%2bHrAj9KzFf6gEDnPZHYn/IUx9eaZ%2bdyoauYwA7DFwL4AxowAuxucxVYu3gBmI72mDDCRNYIDnSoEMIEOwAeTBRjgU8aQWmAB6C%2b9k5H/SXradJxmIjBhLuOAx8BKCLgJnialKdFr10G4EpwMAXTNgTcijVw2UMgDsRg6eQKZ6klVKv7m6swuN/tFYgEwLYE6vMwTARbq2CbAMBN9hkgNs7iAHgcwPxFD4COBjgbh0l0PBNB4688FWd9pY9UXlwpVL6qIVr/IDVcmBPf3xj18YrYkRAYwjJX6c2VwlRcAk4%2bv919zBtdsimEStaaTz25fxLZnRCuj1a//3D97FT53XvZqxv1yxvTt9emK53t2zPpDx%2bkb6QusTl0V1wAbw%2bgBQRl%2b6WjEbADMB0pd2O5ejRbD7aIcIc0p2F/Y2bNYMCx8zcW5gzmynWE9pSrtnCVx8EmDrRn9EBEqDNjTRBrh1lbd00tEBiw9jZrbTDgaGuCDncKxp0wd8qNAKpz0w6Bjtoz1lFb6oNFQKZI2VEcrn0bzhEKdYE3QW9cnY3bwxEClBfnUxwIHcEL1l4YlIqFYDjc7TTDZdSQbF/fhdy1uac2kTmi6ljrwhI3ZRBrpn2ucVpKixi6fwP8EcSAAWu%2b3%2b20Q4l0Ml%2bKQwOpL/fVs9ffvhL/cCZ/%2bv76KU/1L6%2bvbyzRP73kPTk%2beyEJAQ9i/eiFPQTiRMgF4cFKL1wbePNdf33hqoxFjqQ2Ur%2b1pMBu6BNtoSuniTalrqwp3TFnhwey9C0D8IwL0gMI6wOeM8oFA8CFDoN7DJyIPhtCOQLBQBDhBgNdBnQ2ttnP2Wx63QfHrVMNTnd93c/gZh8xDEvSDEHRJMVQFEmA4042hmZYiqapnWQHvS06YKn7zmacord5A5Lm5qy/yH0KTn9VOnrIpi5JutmbrJMDi3gsBtUq0Wgsl8tVy6V2q%2b50O%2bOJSCiWqkGVUMBTKhVms1mhkHW6XaVyLhJLdrA%2bVMolM1ySaj6dLBZLilxW69DqVy41OtqkTqHB8q%2bvM1/IC6CfikeSmWrQ4y4US3z%2b2SX/nc5mtzptEunVG75EopIJzt8Kby9zxZLVYTNazQaD9PTi%2bv3llVKpCQWTzXpOIpeKpVqb2ShSKICrwu3k/Ub9v9P28fp0ubIVe%2bokvE6zIoFgqFDIBQLBZK5QSIc9wVC9WS9VitFEyhP0e9y2eCLpdrkrtRrUgNLpaKletzqc0WjE4/BkM/FssZaMpH1eh8sfxKnPkh/4ScPxJRB9LgnAfJKD2fRXBEANQ5LEQ%2bJ7AwcaQIhYbWSSWedNyF%2b/Vo1jgCCITDpTLJTqjeZkMt4slKvxAyviGgHWsf5HrjNlFFf/R5LrPCC9PWdocJGH7B%2bzUzb4ORiAIOjLf/7yjH/25MmTYCjE0mQNgv7HX16tVvi69oMgicVy8bEo6vOnmNqtTiULVUMtIPTlcrVRr5gMSqB/vD6/y%2bez6JVub8DlcuhNlljYHwlH/KFIIhrS6bU2m6OPwDaH2%2bEwOKwOnKT2wwAK9d7%2b7vLsH4XhUKRYLHXglt9pSqdj57zrs1thyGpwOF2vTz5YLaYz3vnN1Y3BYNQrZDanXcDjx8OBy1uJxWE0ypS9yeKTEpfPl6UkqRE6aebg8XhMratb10dqPp%2bvgGTTnI1aLpc4kJnFHIzPppON8Mxns9FotFytOLiS5F4KoR60EENSBHWvNAAud8sNmJ0k/Ud0AqAfQML%2biF6v1Wq1Hh8ff/3V18lkcpP6/qXSiYOrldisVSQSDQcjlUo1HI4YclXMZzPZRBlqVCHI7bZi/UGrUc/lk93eqFzMIQhardXaTahcq7OfX%2bp/LkK9Xu/58%2bdOh1Muk4PTRrWslAqFsluV5k6vNYikAoNSf/r2pUilzlWqRuXF9ZX4zmJV3l4otJbxBN8vCxwDAKxqtVoul0ciEXA6GSBXF/xio91q1qFGq1zOQ9VaJpuBka7P543H481GAyirfg9B%2b/3Vas9VH0ePlfrRQMk8elNJYrVjXA%2biEnnLALj3Op1Oq9HWarV7V4LzIB/qhjZFfyyneD7VRYfAwHA45PP5Ar7g7IwHDC3Q67lMEuuPCOAkrB0y4AYRBDXE2v3x4BArthaLxe3tLVBBp6enqVS6Uikcv33jtppfvjnR6w3FYlktFysV4vO3xye8y417fEDl9xsxAHagUCg0m03AzHA0jEaCNos1nUlrNZpsoeK4M2Ty6aDHY7Y6Zjixb835sx24l/ifNmKFdxF0t2BuW053YLXTXJvN5sAaDAZbEd9i9dPK3cOtWgTBSrvdAWF4Op2ZTqbAgZtORrP5vAnV6612h2vwfDGHuzCKYc1Wa7bADwcGWwZgmIuGERQFRi1fKWfTAZlU5I/lQpGAxmAQ3/L1OuWtQhvwOgRCMTqcH86ebBmAoDrwluvNJtiBegNyO00mszEYScZTSbfPn82lVHKhIxiz6pWqO/tkjh8WA6D1%2b/0ugnTgDggUQQAANgRYgAGGAd8OQ9HligC2oN/rzWeLQb83my8OS4Q2lZebCH0Xtg%2bqZxvibO46wymie63FbGp8N239IIDa9Cmaun8PcPvhw9nDNR8qgx8mbEc2F9v2mYfPHlWAR5uHKMCJEInEMqkcAHbr89AUQPOGN2r9lJDZPkzaXmI6GeMr4n9/q%2bj7BxbgMB6PcIK6V8rbEIrcPtzEKWo7OJ3NlvhqV9GDhfUHA%2bbnlthoMJ6%2bey%2bXKXr9Qb2at5oNLrsplMxUSgUIqlWr5XgiUYHq4/6k027G4zGoUlSoZQ5vpFYu1aBGu92uQRBQUMlEpFKtQbVSNJECuquQz%2bcL%2bWarXcxEPZFEqVRuNBp6m00qEgTDqeVimoyHssVKuVTJpjMel1VrNIVBYB4NawymTCrmdLlC0Xgqk%2b606uFYqFYuery%2bYqX%2b0x0AobDH4z3n8c13ZhgGWGjxT57fioUylUitUd0K%2bNo7%2ba1IIxSLZReKy9sbnehKrVWdCAQymfzFMzBTZtTdqRUqoUyuEV6o1CqhUiwW6S7PP7w8fiOXy254vFvh7fHJu%2bM376Ri2alQeH31XiORa5Qgprh6ffLuknssqbgQnL9%2b/dZ6p1QZ9edXQr1MZrFYLq8lwNMXytRSIe/Vjy/ESj1w4nsoOhiMNnK%2bfbDlcDi9Xp/VYgVoBpuFwu3ReNjrY9P5FEWQ8WQ0GS/Ho1GtUoURDJ9NR9NRfzhGkS6MoADWAPRgE/rD0XIyHs/Gw/FkMl4MQcSAYUCtjfo9oNk6YOagD65WbbSmswmKwOViuQd%2bo4eBHwWX6mHgQ3Q0Hg1GQwTtTYb9WrU%2bGAwz6XimWAG/iWLAmcTANrabrW6395GBx0KCx17/YT6JAnZQ%2bH9WSL/0lUdfV1jhi91XAB7XQvfwJz%2bZsaOINpe/h9zDhbZvBtE7uoJhPgYNuwpkt23eKFqDldnRUsxWWd1/cfeazM4g/YB9dic/MF6SuTZXe48iHavFGE/EwM61IRDZt0OhQDiSAEdgKHw%2bt8sPYgZyDLazNyBXq1Q2C4zg/p5KrFdf6y/%2bgpf8e2GWyw9k4scvvpOrlN5YRnJ9zuOdBTN5j8P948vvJFfnb3jvFWbvYDQSCd4pZXKF2sgTi/vr1yaYPT7YIig6DU%2bdZe5VSWzQrxSzkUjIH4pUQHSTS9kczmyhWikXE7Fovlzwh2KVSq2UTbfbdX84avf5cYLYsyV%2btD0Y5q1UPyTOHsLkX44lPlv7L0enOdh5YeilAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"325\" alt=\"Cake Files\" data-srcset=\"/assets/static/CakeFiles.5cb2611.7864d7a669527e8e63c068f3b1bead00.png 325w\" data-sizes=\"(max-width: 325px) 100vw, 325px\" data-src=\"/assets/static/CakeFiles.5cb2611.7864d7a669527e8e63c068f3b1bead00.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/CakeFiles.5cb2611.7864d7a669527e8e63c068f3b1bead00.png\" width=\"325\" alt=\"Cake Files\"></noscript></p>\n<p>The <code class=\"language-text\">build.ps1</code> and <code class=\"language-text\">build.sh</code> files are shell scripts that download the Cake executable and execute the build.cake C# script. They also take any parameters that are passed to them and pass them onto your cake script. Now paste the following into your <code class=\"language-text\">build.cake</code> file:</p>\n<div class=\"line-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token comment\">// Target - The task you want to start. Runs the Default task if not specified.</span>\n<span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> <span class=\"token function\">Argument</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Target\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Default\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Configuration - The build configuration (Debug/Release) to use.</span>\n<span class=\"token comment\">// 1. If command line parameter parameter passed, use that.</span>\n<span class=\"token comment\">// 2. Otherwise if an Environment variable exists, use that.</span>\n<span class=\"token keyword\">var</span> configuration <span class=\"token operator\">=</span> \n    <span class=\"token function\">HasArgument</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Configuration\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">?</span> <span class=\"token function\">Argument</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Configuration\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span>\n    <span class=\"token function\">EnvironmentVariable</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Configuration\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">?</span> <span class=\"token function\">EnvironmentVariable</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Configuration\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Release\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The build number to use in the version number of the built NuGet packages.</span>\n<span class=\"token comment\">// There are multiple ways this value can be passed, this is a common pattern.</span>\n<span class=\"token comment\">// 1. If command line parameter parameter passed, use that.</span>\n<span class=\"token comment\">// 2. Otherwise if running on AppVeyor, get it's build number.</span>\n<span class=\"token comment\">// 3. Otherwise if running on Travis CI, get it's build number.</span>\n<span class=\"token comment\">// 4. Otherwise if an Environment variable exists, use that.</span>\n<span class=\"token comment\">// 5. Otherwise default the build number to 0.</span>\n<span class=\"token keyword\">var</span> buildNumber <span class=\"token operator\">=</span>\n    <span class=\"token function\">HasArgument</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BuildNumber\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">?</span> <span class=\"token generic-method\"><span class=\"token function\">Argument</span><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BuildNumber\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span>\n    AppVeyor<span class=\"token punctuation\">.</span>IsRunningOnAppVeyor <span class=\"token punctuation\">?</span> AppVeyor<span class=\"token punctuation\">.</span>Environment<span class=\"token punctuation\">.</span>Build<span class=\"token punctuation\">.</span>Number <span class=\"token punctuation\">:</span>\n    TravisCI<span class=\"token punctuation\">.</span>IsRunningOnTravisCI <span class=\"token punctuation\">?</span> TravisCI<span class=\"token punctuation\">.</span>Environment<span class=\"token punctuation\">.</span>Build<span class=\"token punctuation\">.</span>BuildNumber <span class=\"token punctuation\">:</span>\n    <span class=\"token function\">EnvironmentVariable</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BuildNumber\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">?</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">.</span><span class=\"token function\">Parse</span><span class=\"token punctuation\">(</span><span class=\"token function\">EnvironmentVariable</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BuildNumber\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// A directory path to an Artefacts directory.</span>\n<span class=\"token keyword\">var</span> artefactsDirectory <span class=\"token operator\">=</span> <span class=\"token function\">Directory</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./Artefacts\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Deletes the contents of the Artefacts folder if it should contain anything from a previous build.</span>\n<span class=\"token function\">Task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Clean\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">Does</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">CleanDirectory</span><span class=\"token punctuation\">(</span>artefactsDirectory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Run dotnet restore to restore all package references.</span>\n<span class=\"token function\">Task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Restore\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">IsDependentOn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Clean\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">Does</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">DotNetCoreRestore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Find all csproj projects and build them using the build configuration specified as an argument.</span>\n <span class=\"token function\">Task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Build\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">IsDependentOn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Restore\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">Does</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> projects <span class=\"token operator\">=</span> <span class=\"token function\">GetFiles</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./**/*.csproj\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> project <span class=\"token keyword\">in</span> projects<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">DotNetCoreBuild</span><span class=\"token punctuation\">(</span>\n                project<span class=\"token punctuation\">.</span><span class=\"token function\">GetDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>FullPath<span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">new</span> <span class=\"token class-name\">DotNetCoreBuildSettings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    Configuration <span class=\"token operator\">=</span> configuration\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Look under a 'Tests' folder and run dotnet test against all of those projects.</span>\n<span class=\"token comment\">// Then drop the XML test results file in the Artefacts folder at the root.</span>\n<span class=\"token function\">Task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">IsDependentOn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Build\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">Does</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> projects <span class=\"token operator\">=</span> <span class=\"token function\">GetFiles</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./Tests/**/*.csproj\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> project <span class=\"token keyword\">in</span> projects<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">DotNetCoreTest</span><span class=\"token punctuation\">(</span>\n                project<span class=\"token punctuation\">.</span><span class=\"token function\">GetDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>FullPath<span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">new</span> <span class=\"token class-name\">DotNetCoreTestSettings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    ArgumentCustomization <span class=\"token operator\">=</span> args <span class=\"token operator\">=></span> args\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">Append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-xml\"</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">Append</span><span class=\"token punctuation\">(</span>artefactsDirectory<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">.</span><span class=\"token function\">CombineWithFilePath</span><span class=\"token punctuation\">(</span>project<span class=\"token punctuation\">.</span><span class=\"token function\">GetFilenameWithoutExtension</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>FullPath <span class=\"token operator\">+</span> <span class=\"token string\">\".xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    Configuration <span class=\"token operator\">=</span> configuration<span class=\"token punctuation\">,</span>\n                    NoBuild <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Run dotnet pack to produce NuGet packages from our projects. Versions the package</span>\n<span class=\"token comment\">// using the build number argument on the script which is used as the revision number </span>\n<span class=\"token comment\">// (Last number in 1.0.0.0). The packages are dropped in the Artefacts directory.</span>\n<span class=\"token function\">Task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Pack\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">IsDependentOn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">Does</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> revision <span class=\"token operator\">=</span> buildNumber<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"D4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> project <span class=\"token keyword\">in</span> <span class=\"token function\">GetFiles</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./Source/**/*.csproj\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">DotNetCorePack</span><span class=\"token punctuation\">(</span>\n                project<span class=\"token punctuation\">.</span><span class=\"token function\">GetDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>FullPath<span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">new</span> <span class=\"token class-name\">DotNetCorePackSettings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    Configuration <span class=\"token operator\">=</span> configuration<span class=\"token punctuation\">,</span>\n                    OutputDirectory <span class=\"token operator\">=</span> artefactsDirectory<span class=\"token punctuation\">,</span>\n                    VersionSuffix <span class=\"token operator\">=</span> revision\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The default task to run if none is explicitly specified. In this case, we want</span>\n<span class=\"token comment\">// to run everything starting from Clean, all the way up to Pack.</span>\n<span class=\"token function\">Task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Default\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">IsDependentOn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Pack\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Executes the task specified in the target argument.</span>\n<span class=\"token function\">RunTarget</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>At the top of the script some arguments are defined. Values for these arguments can be set by passing values to the shell scripts via command line, they can come from environment variables or they can come from continuous integration build systems that Cake knows about (It knows all the common ones including TFS, TeamCity, Jenkins and Bamboo). In the above script I show how to get a build number from AppVeyor or Travis CI if the script is currently being run using those systems. This makes the code very short, terse and to the point.</p>\n<p>The rest of the script is made up of a series of chained tasks which execute one after the other, starting with the task with no dependencies. Alternatively you can pass in a Target argument which specifies which task you'd like the script to start executing from. A key thing to note is that the script does not need to know about any file names or file paths, everything is done by convention.</p>\n<p>One very important effect of using Cake is that your build script is easily testable. I've used many continuous integration systems that have their own proprietary tasks and when a slower build fails, debugging it was a nightmare, since it could only be done on the build machine. Since Cake is just a script, you can run it on your local machine and test it to your hearts content which gives you a quicker tighter development loop.</p>\n<h1 id=\"appveyor\"><a href=\"#appveyor\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"aria-hidden\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AppVeyor</h1>\n<p><a href=\"https://www.appveyor.com/docs/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">AppVeyor</a> is my favourite CI system but only works if you are hosting your code with Git based repositories and it only runs builds on Windows. All you need to do is sign-up, enable AppVeyor for your git repository and add an <code class=\"language-text\">appveyor.yml</code> file which is in <a href=\"https://en.wikipedia.org/wiki/YAML\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">YAML</a> format. Here is one of my commented <code class=\"language-text\">appveyor.yml</code> files:</p>\n<div class=\"line-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'{build}'</span>\n\n<span class=\"token key atrule\">pull_requests</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Do not increment build number for pull requests</span>\n  <span class=\"token key atrule\">do_not_increment_build_number</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">nuget</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Do not publish NuGet packages for pull requests</span>\n  <span class=\"token key atrule\">disable_publish_on_pr</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Set the DOTNET_SKIP_FIRST_TIME_EXPERIENCE environment variable to stop wasting time caching packages</span>\n  <span class=\"token key atrule\">DOTNET_SKIP_FIRST_TIME_EXPERIENCE</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token comment\"># Disable sending usage data to Microsoft</span>\n  <span class=\"token key atrule\">DOTNET_CLI_TELEMETRY_OPTOUT</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">build_script</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">ps</span><span class=\"token punctuation\">:</span> .\\build.ps1\n\n<span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span> off\n\n<span class=\"token key atrule\">artifacts</span><span class=\"token punctuation\">:</span>\n<span class=\"token comment\"># Store NuGet packages</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> .\\Artefacts\\**\\*.nupkg\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> NuGet\n<span class=\"token comment\"># Store xUnit Test Results</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> .\\Artefacts\\**\\*.xml\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> xUnit Test Results\n\n<span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n\n<span class=\"token comment\"># Publish NuGet packages</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> NuGet\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> production\n  <span class=\"token key atrule\">api_key</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">secure</span><span class=\"token punctuation\">:</span> 73eFUWSfho6pxCy1VRP1H0AYh/SFiyEREV+/ATcoj0I+sSH9dec/WXs6H2Jy5vlS\n  <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Only publish from the master branch</span>\n    <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> master\n    <span class=\"token comment\"># Only publish if the trigger was a Git tag</span>\n    <span class=\"token comment\"># git tag v0.1.0-beta</span>\n    <span class=\"token comment\"># git push origin --tags</span>\n    <span class=\"token key atrule\">appveyor_repo_tag</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p>It basically executes the <code class=\"language-text\">build.ps1</code> file at the root of my project and collects all the NuGet package and XML unit test result files in my artefacts folder. I also set some environment variables to turn off some lesser known .NET Core features for a faster build.</p>\n<p>AppVeyor, knows about NuGet and I use AppVeyor as my primary build system to publish my NuGet packages (You don't want AppVeyor and Travis CI both publishing your NuGet packages). Now I could have created a task in my cake file to publish NuGet packages and only execute that task if I was running on AppVeyor but AppVeyor has a pretty easy to use configuration file that I've chosen to do this step instead.</p>\n<p>To publish packages to NuGet, you sign-up and receive an API key. Of course, you don't want to share that with the whole world by checking it into GitHub or Bitbucket, so AppVeyor lets you <a href=\"https://ci.appveyor.com/tools/encrypt\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">encrypt</a> it and paste the encrypted value into the <code class=\"language-text\">appveyor.yml</code> file.</p>\n<h1 id=\"travis-ci\"><a href=\"#travis-ci\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"aria-hidden\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Travis CI</h1>\n<p><a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Travis CI</a> is very similar to AppVeyor but it targets both Mac and Linux. All you have to do is sign-up, turn on Travis for your repository and stick a <code class=\"language-text\">.travis.yml</code> file in the root of your project. Here is mine:</p>\n<div class=\"line-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> csharp\n<span class=\"token key atrule\">os</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> linux\n  <span class=\"token punctuation\">-</span> osx\n\n<span class=\"token comment\"># .NET CLI require Ubuntu 14.04</span>\n<span class=\"token key atrule\">sudo</span><span class=\"token punctuation\">:</span> required\n<span class=\"token key atrule\">dist</span><span class=\"token punctuation\">:</span> trusty\n<span class=\"token key atrule\">addons</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">apt</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">packages</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> gettext\n    <span class=\"token punctuation\">-</span> libcurl4<span class=\"token punctuation\">-</span>openssl<span class=\"token punctuation\">-</span>dev\n    <span class=\"token punctuation\">-</span> libicu<span class=\"token punctuation\">-</span>dev\n    <span class=\"token punctuation\">-</span> libssl<span class=\"token punctuation\">-</span>dev\n    <span class=\"token punctuation\">-</span> libunwind8\n    <span class=\"token punctuation\">-</span> zlib1g\n\n<span class=\"token comment\"># .NET CLI requires OSX 10.11</span>\n<span class=\"token key atrule\">osx_image</span><span class=\"token punctuation\">:</span> xcode7.2\n\n<span class=\"token comment\"># Ensure that .NET Core is installed</span>\n<span class=\"token key atrule\">dotnet</span><span class=\"token punctuation\">:</span> 1.0.0<span class=\"token punctuation\">-</span>preview2<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span><span class=\"token number\">003177</span>\n<span class=\"token comment\"># Ensure Mono is installed</span>\n<span class=\"token key atrule\">mono</span><span class=\"token punctuation\">:</span> latest\n\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Set the DOTNET_SKIP_FIRST_TIME_EXPERIENCE environment variable to stop wasting time caching packages</span>\n  <span class=\"token punctuation\">-</span> DOTNET_SKIP_FIRST_TIME_EXPERIENCE=true\n    <span class=\"token comment\"># Disable sending usage data to Microsoft</span>\n  <span class=\"token punctuation\">-</span> DOTNET_CLI_TELEMETRY_OPTOUT=true\n\n<span class=\"token comment\"># You must run this command to give Travis permissions to execute the build.sh shell script:</span>\n<span class=\"token comment\"># git update-index --chmod=+x build.sh</span>\n<span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ./build.sh</code></pre></div>\n<p>You'll notice that we are specifying that we want to build our code on both Mac and Linux. Travis CI will actually run one build for each operating system. We then specify some details about the version of operating system we want to use and what we would like to install on them.</p>\n<p>Once again, I set the .NET environment variables to make the build a bit quicker and finally we run the <code class=\"language-text\">build.sh</code> Bash script to kick things off. Note that you need to run the following command to give Travis permission to execute the build.sh file (This is Linux after all):</p>\n<div class=\"line-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">git update<span class=\"token operator\">-</span>index <span class=\"token operator\">--</span>chmod=<span class=\"token operator\">+</span>x build<span class=\"token punctuation\">.</span>sh</code></pre></div>\n<p>Another thing to note is that if you are still using the older <code class=\"language-text\">xproj</code> project system and your unit tests are using xUnit, then your tests will not run due to this <a href=\"https://github.com/dotnet/cli/issues/3073\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">bug</a>. There is a very nasty workaround in the link.</p>\n<h1 id=\"conclusions\"><a href=\"#conclusions\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"aria-hidden\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusions</h1>\n<p>If you want to learn how to add AppVeyor and Travis CI build status badges to your Git repository ReadMe or learn how to deploy to MyGet/NuGet using tags, I recommend going back to read Andrew's blog post which is still useful. If you're looking for more examples of Cake build scripts, you can take a look at the following Cake repositories:</p>\n<ul>\n<li><a href=\"https://github.com/cake-build/cake\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Cake</a> - Cake builds itself with Cake! They have a very complicated build setup. This repository is great for learning about Cake helper methods that you can use in your scripts.</li>\n<li><a href=\"https://github.com/RehanSaeed/Serilog.Exceptions\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Serilog.Exceptions</a> - Builds, tests and deploys .NET Core NuGet packages.</li>\n<li><a href=\"https://github.com/Dotnet-Boxed/Framework\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">.NET Boxed Framework</a> - Builds, tests and deploys .NET Core NuGet packages.</li>\n<li><a href=\"https://github.com/Dotnet-Boxed/Templates\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">.NET Boxed Templates</a> - Builds, tests and deploys a <code class=\"language-text\">dotnet new</code> NuGet package.</li>\n</ul>\n"}}]}}},"context":{}}