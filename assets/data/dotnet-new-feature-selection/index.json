{"hash":"992041f3cee2ddea299076dafd5923fb032c2369","data":{"post":{"title":"dotnet new Feature Selection","path":"/dotnet-new-feature-selection/","date":"2017-03-26T00:00:00+00:00","dateModified":null,"timeToRead":9,"author":"Muhammad Rehan Saeed","headings":[{"value":"Bool Symbols"},{"value":"String Symbols"},{"value":"Choice Symbols"},{"value":"Computed Symbols"},{"value":"Conditionally Deleting Files or Folders"},{"value":"What's Next?"}],"tags":[{"id":".NET","title":".NET","path":"/tag/net/"},{"id":".NET Core","title":".NET Core","path":"/tag/net-core/"},{"id":"ASP.NET Core","title":"ASP.NET Core","path":"/tag/asp-net-core/"},{"id":".NET Boxed","title":".NET Boxed","path":"/tag/net-boxed/"},{"id":"C#","title":"C#","path":"/tag/c/"},{"id":"dotnet new","title":"dotnet new","path":"/tag/dotnet-new/"}],"description":"How to add feature selection to your dotnet new template using symbols (bool, string, choice, computed) and pre-processor directives.","content":"<ol>\n<li><a href=\"/custom-project-templates-using-dotnet-new/\">dotnet new - Custom Project Templates Using dotnet new</a></li>\n<li><a href=\"/dotnet-new-feature-selection/\">dotnet new - dotnet new Feature Selection</a></li>\n<li><a href=\"/unit-testing-dotnet-new-templates/\">dotnet new - Unit Testing dotnet new Templates</a></li>\n</ol>\n<p>In my last post I showed how to <a href=\"/custom-project-templates-using-dotnet-new/\">get started</a> with using <code class=\"language-inline-text\">dotnet new</code> to build project templates. In this post, I'm going to build on that knowledge and show how to add feature selection to your project template so developers can choose to add or remove bits of your template. If you check out my <a href=\"https://github.com/Dotnet-Boxed/Templates\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">.NET Boxed API</a> project template, you'll see that I have 17 features for you to set. If you run the help command against my template you'll see a description of each and instructions on how you can set them (I've cleaned up the CLI output, the current help commands output is pretty awful but this is being <a href=\"https://github.com/dotnet/templating/issues/348\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">addressed</a> in the next version of <code class=\"language-inline-text\">dotnet new</code>).</p>\n<div class=\"line-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PS C:\\Users\\rehan.saeed> dotnet new api --help\nTemplate Instantiation Commands for .NET Core CLI.\n\nUsage: dotnet new [arguments] [options]\n\nArguments:\n  template  The template to instantiate.\n\nOptions:\n  -l|--list         List templates containing the specified name.\n  -lang|--language  Specifies the language of the template to create\n  -n|--name         The name for the output being created. If no name is specified, the name of the current directory is\nused.\n  -o|--output       Location to place the generated output.\n  -h|--help         Displays help for this command.\n  -all|--show-all   Shows all templates\n\n.NET Boxed API (C#)\nAuthor: Muhammad Rehan Saeed (RehanSaeed.com)\nOptions:\n  -Ti|--Title: The name of the project which determines the assembly product name. If the Swagger feature is enabled,\n    shows the title on the Swagger UI.\n    string - Optional\n    Default: Project Title\n  -D|--Description: A description of the project which determines the assembly description. If the Swagger feature is\n    enabled, shows the description on the Swagger UI.\n    string - Optional\n    Default: Project Description\n  -Au|--Author: The name of the author of the project which determines the assembly author, company and copyright\n    information.\n    string - Optional\n    Default: Project Author\n  -Sw|--Swagger: Swagger is a format for describing the endpoints in your API. Swashbuckle is used to generate a\n    Swagger document and to generate beautiful API documentation, including a UI to explore and test operations,\n    directly from your routes, controllers and models.\n    bool - Optional\n    Default: true\n  -T|--TargetFramework: Decide which version of the .NET Framework to target.\n    .NET Core         - Run cross platform (on Windows, Mac and Linux). The framework is made up of NuGet packages\n                        which can be shipped with the application so it is fully stand-alone.\n    .NET Framework    - Gives you access to the full breadth of libraries available in .NET instead of the subset\n                        available in .NET Core but requires it to be pre-installed.\n    Both              - Target both .NET Core and .NET Framework.\n    Default: Both\n  -P|--PrimaryWebServer: The primary web server you want to use to host the site.\n    Kestrel        - A web server for ASP.NET Core that is not intended to be internet facing as it has not been\n                     security tested. IIS or NGINX should be placed in front as reverse proxy web servers.\n    WebListener    - A Windows only web server. It gives you the option to take advantage of Windows specific\n                     features, like Windows authentication, port sharing, HTTPS with SNI, HTTP/2 over TLS\n                     (Windows 10), direct file transmission, and response caching WebSockets (Windows 8).\n    Default: Kestrel\n  -Re|--ReverseProxyWebServer: The internet facing reverse proxy web server you want to use in front ofthe primary\n    web server to host the site.\n    Internet Information Services (IIS) - A flexible, secure and manageable Web server for hosting anything on the\n                                          Web using Windows Server. Select this option if you are deploying your site\n                                          to Azure web apps. IIS is preconfigured to set request limits for security.\n    NGINX                               - A free, open-source, cross-platform high-performance HTTP server and\n                                          reverse proxy, as well as an IMAP/POP3 proxy server. It does have a Windows\n                                          version but its not very fast and IIS is better on that platform. If the\n                                          HTTPS Everywhere feature is enabled, NGINX is pre-configured to enable the\n                                          most secure TLS protocols and ciphers for security and to enable HTTP 2.0\n                                          and SSL stapling for performance.\n    Both                                - Support both reverse proxy web servers.\n    Default: Both\n  -C|--CloudProvider: Select which cloud provider you are using if any, to add cloud specific features.\n    Azure    - The Microsoft Azure cloud. Adds logging features that let you see logs in the Azure portal.\n    None     - No cloud provider is being used.\n    Default: None\n  -A|--Analytics: Monitor internal information about how your application is running, as well as external user\n    information.\n    Application Insights    - Monitor internal information about how your application is running, as well as\n                              external user information using the Microsoft Azure cloud.\n    None                    - Not using any analytics.\n    Default: None\n  -Ap|--ApplicationInsightsInstrumentationKey: Your Application Insights instrumentation key\n    e.g. 11111111-2222-3333-4444-555555555555.\n    string - Optional\n    Default: APPLICATION-INSIGHTS-INSTRUMENTATION-KEY\n  -H|--HttpsEverywhere: Use the HTTPS scheme and TLS security across the entire site, redirects HTTP to HTTPS and\n    adds a Strict Transport Security (HSTS) HTTP header with preloading enabled. Configures the primary and reverse\n    proxy web servers for best security and adds a development certificate file for use in your development environment.\n    bool - Optional\n    Default: true\n  -Pu|--PublicKeyPinning: Adds the Public-Key-Pins (HPKP) HTTP header to responses. It stops man-in-the-middle\n    attacks by telling browsers exactly which TLS certificate you expect. You must have two TLS certificates for this\n    to work, if you get this wrong you will have performed a denial of service attack on yourself.\n    bool - Optional\n    Default: false\n  -CO|--CORS: Browser security prevents a web page from making AJAX requests to another domain. This restriction is\n    called the same-origin policy, and prevents a malicious site from reading sensitive data from another site.\n    CORS is a W3C standard that allows a server to relax the same-origin policy. Using CORS, a server can explicitly\n    allow some cross-origin requests while rejecting others.\n    bool - Optional\n    Default: true\n  -X|--XmlFormatter: Choose whether to use the XML input/output formatter and which serializer to use.\n    DataContractSerializer - The default XML serializer you should use. Requires the use of [DataContract] and\n                             [DataMember] attributes.\n    XmlSerializer          - The alternative XML serializer which is slower but gives more control. Uses the\n                             [XmlRoot], [XmlElement] and [XmlAttribute] attributes.\n    None                   - No XML formatter.\n    Default: None\n  -S|--StatusController: An endpoint that returns the status of this API and its dependencies, giving an indication\n    of its health. This endpoint can be called by site monitoring tools which ping the site or by load balancers\n    which can remove an instance of this API if it is not functioning correctly.\n    bool - Optional\n    Default: true\n  -R|--RequestId: Require that all requests send the X-Request-ID HTTP header containing a GUID. This is useful where\n    you have access to the client and server logs and want to correlate a request and response between the two.\n    bool - Optional\n    Default: false\n  -U|--UserAgent: Require that all requests send the User-Agent HTTP header containing the application name and\n    version of the caller.\n    bool - Optional\n    Default: false\n  -Ro|--RobotsTxt: Adds a robots.txt file to tell search engines not to index this site.\n    bool - Optional\n    Default: true\n  -Hu|--HumansTxt: Adds a humans.txt file where you can tell the world who wrote the application. This file is a good\n    place to thank your developers.\n    bool - Optional\n    Default: true</code></pre></div>\n<p>As you can see from the output, there are a few different types of feature you can create. You can also choose to make a feature required or optional. An optional feature, if not specified by the user will fall-back to a default value. Here are the different types available:</p>\n<ul>\n<li><strong>bool</strong> - This feature can be turned on or off and has a default of true or false.</li>\n<li><strong>string</strong> - This can be used to do a string replacement in your template. It has a default value which you can set to any arbitrary value.</li>\n<li><strong>choice</strong> - This is a feature with two or more named choices. Each choice can have it's own description. The default value must be one of the choices.</li>\n<li><strong>computed</strong> - These are features flags that can be computed based on other symbols.</li>\n</ul>\n<h1 id=\"bool-symbols\"><a href=\"#bool-symbols\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"22\" height=\"22\" aria-hidden=\"true\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bool Symbols</h1>\n<p>You can create a boolean feature by adding symbols section to your <code class=\"language-inline-text\">template.json</code> file. If you look at the example below, I've specified an optional bool symbol, with a default value of true.</p>\n<div class=\"line-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token property\">\"symbols\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Swagger\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"parameter\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"datatype\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bool\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"isRequired\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"defaultValue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your description...\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In your code, you can then use the symbol name, in this case <code class=\"language-inline-text\">Swagger</code> as a pre-processor directive in C# code:</p>\n<div class=\"line-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#<span class=\"token directive keyword\">if</span> (Swagger)</span>\nConsole<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Swagger feature was selected\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">else</span></span>\nConsole<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Swagger feature was not selected\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">endif</span></span></code></pre></div>\n<p>This is really cool because you can still run the application as a template author and the project will still work. If you define a <code class=\"language-inline-text\">Swagger</code> constant in your project properties, your feature will turn on or off too. This makes debugging your project template very easy as a template author.</p>\n<p>If you want to use the symbol in files other than C# where pre-processor directives do not exist, you can use the comment syntax specific to that file extension, so in a JavaScript file would use the <code class=\"language-inline-text\">//</code> syntax:</p>\n<div class=\"line-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token comment\">//#if (Swagger)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>'Swagger feature was selected'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//#else</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>'Swagger feature was <span class=\"token keyword\">not</span> selected'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//#endif</span></code></pre></div>\n<p>Most file extensions that have their own comment syntax have been catered for. For text files where there is no comment syntax or for any file extension that the templating engine doesn't know about you can use the <code class=\"language-inline-text\">#</code> character:</p>\n<div class=\"line-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token preprocessor property\">#<span class=\"token directive keyword\">if</span> (Swagger)</span>\nSwagger feature was selected\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">else</span></span>\nSwagger feature was <span class=\"token keyword\">not</span> selected\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">endif</span></span></code></pre></div>\n<p>You can look at <a href=\"https://github.com/dotnet/templating/blob/cb9edbfe02c038a306fbcb6bbe162462d5fb59f0/src/Microsoft.TemplateEngine.Orchestrator.RunnableProjects/Config/ConditionalConfig.cs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">this</a> code in the templating engine for a full list of supported file extensions and comment types.</p>\n<h1 id=\"string-symbols\"><a href=\"#string-symbols\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"22\" height=\"22\" aria-hidden=\"true\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>String Symbols</h1>\n<p>String symbols can be used to do simple file replace operations.</p>\n<div class=\"line-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token property\">\"symbols\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Title\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"parameter\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"datatype\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"isRequired\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"defaultValue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Default Project Title\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"replaces\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"PROJECT-TITLE\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your description...\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The above symbol looks for a <code class=\"language-inline-text\">PROJECT-TITLE</code> string and replaces it with whatever the user specifies or with the default value <code class=\"language-inline-text\">Default Project Title</code> if the user doesn't set anything.</p>\n<h1 id=\"choice-symbols\"><a href=\"#choice-symbols\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"22\" height=\"22\" aria-hidden=\"true\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Choice Symbols</h1>\n<p>A choice symbol is useful when you have more than two options and can't use bool.</p>\n<div class=\"line-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token property\">\"symbols\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"TargetFramework\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"parameter\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"datatype\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"choice\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"isRequired\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"choices\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"choice\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".NET Core\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your description...\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"choice\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".NET Framework\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your description...\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"choice\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Both\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your description...\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"defaultValue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Both\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your description...\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In the example above, you have the choice of selecting a target framework, with a value of <code class=\"language-inline-text\">.NET Core</code>, <code class=\"language-inline-text\">.NET Framework</code> or <code class=\"language-inline-text\">Both</code>. Each choice has it's own description and the overall symbol also has it's description.</p>\n<h1 id=\"computed-symbols\"><a href=\"#computed-symbols\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"22\" height=\"22\" aria-hidden=\"true\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Computed Symbols</h1>\n<p>In the above example, you can't use the value '.NET Core' as a C# pre-processor variable because it contains a dot and a space. This is where a computed symbol comes in handy.</p>\n<div class=\"line-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token property\">\"symbols\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token property\">\"NETCore\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"computed\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"(TargetFramework == \\\".NET Core\\\" || TargetFramework == \\\"Both\\\")\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"NETFramework\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"computed\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"(TargetFramework == \\\".NET Framework\\\" || TargetFramework == \\\"Both\\\")\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Here I have set up two computed symbols which determines whether '.NET Core' or '.NET Framework' was selected individually in the previous choice symbol. I have named these symbols without a dot or space i.e. <code class=\"language-inline-text\">NETCore</code> and <code class=\"language-inline-text\">NETFramework</code> so I can use these as C# pre-processor symbols, the same way I showed above.</p>\n<h1 id=\"conditionally-deleting-files-or-folders\"><a href=\"#conditionally-deleting-files-or-folders\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"22\" height=\"22\" aria-hidden=\"true\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conditionally Deleting Files or Folders</h1>\n<p>You can also use symbols to delete certain files or folders. In this example, I've extended my bool symbol example to additionally remove two files and a folder if the feature is deselected by the user.</p>\n<div class=\"line-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token property\">\"symbols\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Swagger\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"parameter\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"datatype\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bool\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"isRequired\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"defaultValue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your description...\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sources\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"modifiers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"condition\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"(!Swagger)\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"Constants/HomeControllerRoute.cs\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"Controllers/HomeController.cs\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ViewModelSchemaFilters/**/*\"</span>\n          <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>You do this by adding source modifiers. I've added one here with a condition and three file and folder exclusions. The exclusions use a globbing pattern.</p>\n<h1 id=\"whats-next\"><a href=\"#whats-next\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"22\" height=\"22\" aria-hidden=\"true\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What's Next?</h1>\n<p>There are several other useful features of the templating engine which I'll cover in a follow up post as this is starting to get quite long. Feel free to take a look at the <a href=\"https://github.com/Dotnet-Boxed/Templates\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">source code</a> for my API template to see a full example.</p>\n","heroImage":"/images/hero/Who-Wants-To-Be-A-Millionaire-1366x768.png"}},"context":{}}