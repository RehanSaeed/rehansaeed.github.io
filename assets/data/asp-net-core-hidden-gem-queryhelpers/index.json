{"hash":"b5da4df75a2bba73b2c50db13a3d48f7936531de","data":{"post":{"title":"ASP.NET Core Hidden Gem - QueryHelpers","path":"/asp-net-core-hidden-gem-queryhelpers/","date":"2018-07-14T00:00:00+00:00","dateModified":null,"timeToRead":1,"author":"Muhammad Rehan Saeed","headings":[],"tags":[{"id":"ASP.NET Core","title":"ASP.NET Core","path":"/tag/asp-net-core/"},{"id":"C#","title":"C#","path":"/tag/c/"},{"id":"QueryHelpers","title":"QueryHelpers","path":"/tag/query-helpers/"},{"id":"URL","title":"URL","path":"/tag/url/"}],"description":"How to build a URL containing dynamic query arguments using the ASP.NET Core QueryHelpers.AddQueryString method. A hidden gem in ASP.NET Core.","content":"<p>I discovered a hidden gem in ASP.NET Core a couple of weeks ago that can help to build up and parse URL's called <code class=\"language-inline-text\">QueryHelpers</code>. Here's how you can use it to build a URL using the <code class=\"language-inline-text\">AddQueryString</code> method:</p>\n<div class=\"line-highlight\" data-language=\"cs\"><pre class=\"language-cs\"><code class=\"language-cs\"><span class=\"token class-name\"><span class=\"token keyword\">var</span></span> queryArguments <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Dictionary<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token string\">\"static-argument\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"foo\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>someFlagIsEnabled<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    queryArguments<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dynamic-argument\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">string</span></span> url <span class=\"token operator\">=</span> QueryHelpers<span class=\"token punctuation\">.</span><span class=\"token function\">AddQueryString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/example/path\"</span><span class=\"token punctuation\">,</span> queryArguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Notice that there are no question marks or ampersands in sight. Where this really shines is when you want to add multiple arguments and then need to write code to work out whether to add a question mark or ampersand.</p>\n<p>It's also worth noting that the values of the query arguments are URL encoded for you too. The type also has a <code class=\"language-inline-text\">ParseQuery</code> method to parse query strings but that's less useful to us as ASP.NET Core controllers do that for you.</p>\n<p>Finally, .NET also has a type called <code class=\"language-inline-text\">UriBuilder</code> that you should know about. It's more geared towards building up a full URL, rather than a relative URL as I'm doing above. It has a <code class=\"language-inline-text\">Query</code> property that you can use to set the query string but it's only of type string, so much less useful than <code class=\"language-inline-text\">QueryHelpers.AddQueryString</code>.</p>\n","heroImage":"/images/hero/Microsoft-.NET-1366x768.png"}},"context":{}}